{"version":3,"file":"Article-d2183ac7.js","sources":["../../../../pages/Article.vue"],"sourcesContent":["<template>\n    <!-- https://ithelp.ithome.com.tw/articles/10304576 -->\n    <div class=\"row gx-4 gx-lg-5 justify-content-center\">\n        <div class=\"col-md-10 col-lg-8 col-xl-7\">\n            <!-- search bar -->\n            <div class=\"input-group mb-3\">\n                <div class=\"input-group-prepend\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\"\n                            aria-expanded=\"false\">{{ filterType }}</button>\n                        <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu\">\n                            <li v-for=\"(type, index) in filterTypes\" :key=\"index\">\n                                <button class=\"dropdown-item\" @click=\"() => {\n                                    filterType = type;\n                                    searchText = '';\n                                    searchTexts = [];\n                                }\" type=\"button\">{{ type }}</button>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <template v-if=\"filterType === filterTypes[1]\">\n                    <input @keydown.enter=\"() => {\n                        const tag = searchText.replace(/ /g, '')\n                        if (tag.length > 0 && searchTexts.findIndex(i => i === tag) === -1)\n                            searchTexts.push(tag);\n                        searchText = '';\n                    }\" v-model=\"searchText\" type=\"text\" class=\"form-control\"\n                        placeholder=\"輸入查詢 Tag (禁止輸入半形空白)，點擊 Enter 以鍵入\" aria-label=\"Username\"\n                        aria-describedby=\"basic-addon1\" />\n                </template>\n                <template v-else-if=\"filterType === filterTypes[2]\">\n                    <!-- <div class=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\n                        <spen v-for=\"(t, i) in types\" :key=\"i\">\n                            <input @focus=\"searchText = t\" type=\"radio\" class=\"btn-check\" name=\"btnradio\"\n                                :id=\"`btnradio${i}`\" autocomplete=\"off\" checked>\n                            <label class=\"btn btn-outline-primary\" :for=\"`btnradio${i}`\">{{ t }}</label>\n                        </spen>\n                    </div> -->\n\n                    <div style=\"width:60%; background-color: aliceblue;\" class=\"dropdown\">\n                        <button style=\"width: 100%;\" class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\"\n                            data-bs-toggle=\"dropdown\" aria-expanded=\"false\">類型</button>\n                        <ul style=\"width: 100%;\" class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu\">\n                            <li v-for=\"(t, i) in types\" :key=\"i\">\n                                <button @click=\"searchText = t\" class=\"dropdown-item\" type=\"button\">{{ t }}</button>\n                            </li>\n                        </ul>\n                    </div>\n                </template>\n                <template v-else>\n                    <input v-model=\"searchText\" type=\"text\" class=\"form-control\" placeholder=\"輸入查詢內容\" aria-label=\"Username\"\n                        aria-describedby=\"basic-addon1\" />\n                </template>\n            </div>\n            <div v-if=\"filterType === filterTypes[1]\">\n                <span class=\"badge rounded-pill bg-secondary\" v-for=\"tag in searchTexts\" :key=\"tag\">\n                    {{ tag }}\n                    <span @click=\"searchTexts.splice(searchTexts.findIndex(i => i === tag), 1)\"\n                        class=\"badge rounded-pill bg-secondary\" style=\"cursor: pointer;\" title=\"移除\">x</span>\n                </span>\n            </div>\n            <br />\n            <!-- article list -->\n            <main>\n                <!-- where query is mongo query syntax: https://content.nuxtjs.org/api/composables/query-content -->\n                <ContentQuery path=\"/article\" :where=\"where\">\n                    <template #default=\"{ data }\">\n                        <div v-for=\"article in data\" :key=\"article._path\" class=\"card mb-3\">\n                            <NuxtLink class=\"nav-link\" :to=\"article._path\">\n                                <div class=\"row g-0\">\n                                    <div class=\"col-md-4\">\n                                        <img :src=\"article.navImage\" class=\"img-fluid rounded-start\">\n                                    </div>\n                                    <div class=\"col-md-8\">\n                                        <div class=\"card-body\">\n                                            <h3 class=\"card-title\">\n                                                <span class=\"badge bg-secondary\">\n                                                    {{ article.type }}\n                                                </span>\n                                                {{ article.title }}\n                                            </h3>\n                                            <!-- <small class=\"text-muted\"> {{ article.subtitle }}</small> -->\n                                            <p class=\"card-text nav-description\">\n                                                {{ article.description }}\n                                            </p>\n\n                                            <p class=\"card-text\">\n                                                <span class=\"badge rounded-pill bg-secondary\"\n                                                    v-for=\"(tag, index) in article.tags\" :key=\"index\">\n                                                    {{ tag }}\n                                                </span>\n                                                <br />\n                                                <small class=\"text-muted d-flex justify-content-end\">\n                                                    Posted by&ensp;\n                                                    <a href=\"#!\">{{ article.author }}</a>\n                                                    &ensp;on {{ new Date(article.updated).toDateString() }}\n                                                </small>\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </NuxtLink>\n                        </div>\n                    </template>\n                    <template #not-found>\n                        <p>No authors found.</p>\n                    </template>\n                </ContentQuery>\n            </main>\n            <!-- TODO 還缺一個分頁模組 -->\n        </div>\n    </div>\n</template>\n<script setup lang=\"ts\">\nconst searchText = ref(\"\")\nconst searchTexts = ref<string[]>([])\n\nconst filterTypes = ref([\"標題\", \"Tag\", \"分類\", \"簡介\"])\nconst types = ref([\"type\", \"type1\", \"type2\", \"type3\", \"type4\"])\nconst filterType = ref(\"標題\")\n\nconst where = computed(() => {\n    switch (filterType.value) {\n        case filterTypes.value[0]:\n            return { title: { $regex: searchText.value } }\n        case filterTypes.value[1]:\n            return { $and: searchTexts.value.map(i => ({ tags: { $regex: i } })) }\n        case filterTypes.value[2]:\n            return { type: searchText.value === \"\" ? { $regex: \"\" } : searchText.value }\n        case filterTypes.value[3]:\n            return { description: { $regex: searchText.value } }\n        default:\n            return { title: { $regex: searchText.value } }\n    }\n})\n</script>\n<style lang=\"scss\" scoped>\n.nav-description {\n    // margin: 36px;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 3;\n    overflow: hidden;\n}\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHM,UAAA,aAAa,IAAI,EAAE;AACnB,UAAA,cAAc,IAAc,CAAA,CAAE;AAEpC,UAAM,cAAc,IAAI,CAAC,MAAM,OAAO,MAAM,IAAI,CAAC;AAC3C,UAAA,QAAQ,IAAI,CAAC,QAAQ,SAAS,SAAS,SAAS,OAAO,CAAC;AACxD,UAAA,aAAa,IAAI,IAAI;AAErB,UAAA,QAAQ,SAAS,MAAM;AACzB,cAAQ,WAAW,OAAO;AAAA,QACtB,KAAK,YAAY,MAAM,CAAC;AACpB,iBAAO,EAAE,OAAO,EAAE,QAAQ,WAAW,MAAQ,EAAA;AAAA,QACjD,KAAK,YAAY,MAAM,CAAC;AACpB,iBAAO,EAAE,MAAM,YAAY,MAAM,IAAI,CAAA,OAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;AAAA,QACzE,KAAK,YAAY,MAAM,CAAC;AACb,iBAAA,EAAE,MAAM,WAAW,UAAU,KAAK,EAAE,QAAQ,GAAO,IAAA,WAAW;QACzE,KAAK,YAAY,MAAM,CAAC;AACpB,iBAAO,EAAE,aAAa,EAAE,QAAQ,WAAW,MAAQ,EAAA;AAAA,QACvD;AACI,iBAAO,EAAE,OAAO,EAAE,QAAQ,WAAW,MAAQ,EAAA;AAAA,MACrD;AAAA,IAAA,CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}